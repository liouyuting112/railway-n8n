# Railway N8N éƒ¨ç½²éŒ¯èª¤ä¿®æ­£

## âŒ éŒ¯èª¤è¨Šæ¯

å¾ Railway æ—¥èªŒçœ‹åˆ°å…©å€‹éŒ¯èª¤ï¼š

1. `Invalid number value for N8N_PORT: $PORT`
2. `Error: Failed to load module "community-packages"`

## âœ… è§£æ±ºæ–¹æ¡ˆ

### æ­¥é©Ÿ 1ï¼šä¿®æ­£ç’°å¢ƒè®Šæ•¸

åœ¨ Railway å°ˆæ¡ˆçš„ **"Variables"** æ¨™ç±¤ä¸­ï¼š

**åˆªé™¤æˆ–ä¸è¦è¨­å®šï¼š**
- âŒ `N8N_PORT`ï¼ˆä¸è¦è¨­å®šé€™å€‹ï¼ï¼‰

**å¿…é ˆè¨­å®šçš„ç’°å¢ƒè®Šæ•¸ï¼š**
- âœ… `N8N_BASIC_AUTH_ACTIVE=true`
- âœ… `N8N_BASIC_AUTH_USER=admin`ï¼ˆæˆ–ä½ å–œæ­¡çš„ç”¨æˆ¶åï¼‰
- âœ… `N8N_BASIC_AUTH_PASSWORD=ä½ çš„å¯†ç¢¼`ï¼ˆè«‹ä¿®æ”¹ï¼‰

**å¯é¸çš„ç’°å¢ƒè®Šæ•¸ï¼š**
- `N8N_HOST=0.0.0.0`
- `N8N_PROTOCOL=https`

### æ­¥é©Ÿ 2ï¼šæ›´æ–°ç¨‹å¼ç¢¼

1. **æ›´æ–° `package.json`**
   - å·²æ›´æ–°ç‚ºä½¿ç”¨ `n8n: latest`
   - å•Ÿå‹•å‘½ä»¤æ”¹ç‚ºï¼š`n8n start --tunnel`

2. **æ›´æ–° `railway.json`**
   - å•Ÿå‹•å‘½ä»¤å·²æ›´æ–°

3. **é‡æ–°éƒ¨ç½²**
   - åœ¨ Railway ä¸­ï¼Œé»æ“Š **"Redeploy"** æˆ–æ¨é€æ–°çš„ç¨‹å¼ç¢¼åˆ° GitHub

### æ­¥é©Ÿ 3ï¼šè¨­å®šå…¬é–‹ç¶²å€

1. åœ¨ Railway å°ˆæ¡ˆä¸­ï¼Œé»æ“Šæœå‹™
2. é»æ“Š **"Settings"** æ¨™ç±¤
3. åœ¨ **"Networking"** å€å¡Š
4. é»æ“Š **"Generate Domain"**
5. è¼¸å…¥ç«¯å£ï¼š**`5678`**ï¼ˆN8N é è¨­ç«¯å£ï¼‰
6. é»æ“Š **"Generate Domain"**
7. è¤‡è£½ç”Ÿæˆçš„ URL

### æ­¥é©Ÿ 4ï¼šåœ¨ Strapi è¨­å®š Webhook

1. å‰å¾€ï¼šhttps://multi-site-strapi-backend-production.up.railway.app/admin/settings/webhooks
2. å»ºç«‹æ–° Webhookï¼š
   - **URL**ï¼š`https://ä½ çš„railwayåŸŸå.railway.app/webhook/strapi-webhook`
   - **Events**ï¼šå‹¾é¸ `Entry create` å’Œ `Entry update`

## ğŸ” ç‚ºä»€éº¼æœƒå‡ºéŒ¯ï¼Ÿ

- `N8N_PORT=$PORT` ä¸­çš„ `$PORT` æ˜¯ Railway çš„ç’°å¢ƒè®Šæ•¸ï¼Œä½† N8N ç„¡æ³•ç›´æ¥è§£æ `$PORT` å­—ä¸²
- N8N æœƒè‡ªå‹•åµæ¸¬ Railway æä¾›çš„ `PORT` ç’°å¢ƒè®Šæ•¸ï¼Œä¸éœ€è¦æ‰‹å‹•è¨­å®š `N8N_PORT`

## âœ… æ­£ç¢ºçš„è¨­å®š

Railway æœƒè‡ªå‹•æä¾› `PORT` ç’°å¢ƒè®Šæ•¸ï¼ˆä¾‹å¦‚ï¼š`8080`ï¼‰ï¼ŒN8N æœƒè‡ªå‹•åµæ¸¬ä¸¦ä½¿ç”¨ï¼Œä¸éœ€è¦é¡å¤–è¨­å®š `N8N_PORT`ã€‚

